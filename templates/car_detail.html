{% extends "base.html" %}
{% block title %}{{ car.title }}{% endblock %}
{% block content %}
<div class="detail">
  <!-- LEFT: images -->
  <div class="detail-gallery">
    {% if car.is_delivered %}
      <div class="badge delivered status-badge">Delivered</div>
    {% endif %}

    <img id="mainImage" class="main-image"
         src="{{ car.image_url or url_for('static', filename='img/placeholder.svg') }}"
         alt="{{ car.title }}">

    {% if car.images %}
      <div class="thumbs">
        {% for img in car.images %}
          <img src="{{ img.url }}" alt="thumb"
               onclick="document.getElementById('mainImage').src=this.src">
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <!-- RIGHT: details -->
  <div class="detail-info">
    {% if car.is_delivered %}
      <div class="badge delivered">Delivered</div>
    {% endif %}

    <h1>{{ car.title }}</h1>
    <p class="price big">à§³ {{ "{:,}".format(car.price or 0) }}</p>

    <ul class="specs">
      <li><b>Make:</b> {{ car.make or "-" }}</li>
      <li><b>Model:</b> {{ car.model or "-" }}</li>
      <li><b>Year:</b> {{ car.year or "-" }}</li>
      <li><b>Auction point:</b> {{ car.auction_point or "-" }}</li>
      <li><b>Mileage:</b> {{ car.mileage_km or "-" }} km</li>
      <li><b>Fuel:</b> {{ car.fuel_type or "-" }}</li>
      <li><b>Transmission:</b> {{ car.transmission or "-" }}</li>
      <li><b>Body:</b> {{ car.body_type or "-" }}</li>
      <li><b>Color:</b> {{ car.color or "-" }}</li>
      <li><b>Location:</b> {{ car.location or "-" }}</li>
    </ul>

    <!-- Description block with Auction point -->
    <div class="desc">
      {% if car.auction_point %}
        <p><b>Auction point:</b> {{ car.auction_point }}</p>
      {% endif %}
      {% if car.description %}
        <p>{{ car.description }}</p>
      {% else %}
        <p class="muted small">No description provided.</p>
      {% endif %}
    </div>

    <h3>Contact about this car</h3>
<form action="{{ url_for('inquire', car_id=car.id) }}" method="post" class="contact-form">
  <div class="grid-2">
    <input name="name" placeholder="Your name" required aria-label="Your name">
    <!-- Email is required + HTML5 email validation -->
    <input name="email" type="email" placeholder="Email (required)" required aria-label="Email">
  </div>

  <div class="grid-2">
    <!-- Phone: Bangladesh mobile number pattern (01XXXXXXXXX or +8801XXXXXXXXX) -->
    <input
      name="phone"
      type="tel"
      inputmode="tel"
      placeholder="Mobile (01XXXXXXXXX or +8801XXXXXXXXX)"
      pattern="^(?:\+?8801\d{9}|01\d{9})$"
      title="Bangladesh mobile: 01XXXXXXXXX or +8801XXXXXXXXX"
      aria-label="Mobile number">
    <input placeholder="Subject" value="Inquiry: {{ car.title }}" disabled>
  </div>

  <textarea name="message" rows="4" placeholder="Your message..." required aria-label="Message"></textarea>

  <button>Send Inquiry</button>
</form>

  </div>
</div>
{% endblock %}
